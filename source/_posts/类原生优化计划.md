---
title: 类原生优化计划
tags: 刷机
categories:
  - 科学与技术
  - 计算机
  - 刷机
cover: >-
  https://s2.hdslb.com/bfs/article/933c394a912fe5229247ae17ad006be11352440272.png@1e_1c.webp
katex: false
description: 类原生真好用～
abbrlink: 4097fa9
date: 2023-07-08 16:27:55
updated: 2024-02-03 16:27:55
---

{% note warning %}
初版文章有错误且已过期，请不要参考
{% endnote %}

作为一个信息学爱好者，怎么能不搞刷机呢？作为旧机型用户，我已经遭受绿厂迫害数年了。一气之下，我便把手机刷成了类原生（DotOS 5.2 Vanilla）。在使用了数月后，有了些许经验，分享一下。

# 机型概况

机子是 2017 年发布的 OPPO R11，CPU 是骁龙 600aie，运存 4GB，闪存 64GB（实际可用 58GB）。电池是原装的 3000mAh 的（现在只有 2200mAh 了 TAT）

# 系统概况

系统用的 R11_11_ROM_dotOS5.2_Vanilla_20230925_b3642af1.zip，Android 版本 11，内核 4.4.153-perf+，内部版本 RD2A.211001.002，基带 Q_V1_P14。带有 Kitsune Mask Canary，LSPosed CI。

# 易用性

咱是国内用户，自然用不惯，需要进行一定设置.

## 全面屏手势

对于某些人来说，全面屏手势是日常不可或缺的功能，但……DotOS 没有！对此，只能用三方软件 Gesture 解决。

注：对于其性能差的现象，请到软件设置里授予 Root 并关闭前台监听即可

## 其它

对于机友来说，免核心降级啊，模块之类在此不多赘言，适合自己的，才是最好的！

# 流畅度

## 内存方向

对于 Android 11+Magisk+LSPosed+Shizuku+小而美+QQ+etc.来说，sdm660+4GB 已显捉襟见肘。对于小而美，QQ，B 站，抖音等软件，其本身优化就极差，再加一堆 XpHook，性能便更差了：不仅狂杀后台，而且时常会 OOM。怎么办呢？对于内存过小的问题，办法有：

### 交换空间

{% note danger %}
交换空间**可能**会带来一定负面影响，包括增多耗电、发热、消耗闪存寿命等。但总体而言，手动调节交换空间的利远大于弊
{% endnote %}

为了从源头上解决内存捉襟见肘的问题，我们可以使用交换空间。这里我使用使用 Scene 调节。

#### ZRAM

ZRAM 是在内存中划出一块来并对其进行压缩，详情可见 [ArchWikiCN](https://wiki.archlinuxcn.org/wiki/Zram)。正因如此，ZRAM 设置不当会给 CPU 带来显著的压力，进而拉大耗电量、减少续航。

如果您只打算开 ZRAM，那么建议在 2GB 到 2.75GB（2048MB 到 2816MB）之间。过小作用不大，过大拉多耗电量。

#### Swap

{% note danger %}
不可以只启用 Swap，这会严重拉慢磁盘 IO 与严重磨损磁盘！
{% endnote %}

#### ZRAM+Swap

{% note info %}
推荐的方案
{% endnote %}

ZRAM 建议在 1.5GB 到 2.5GB（1536MB 到 2560MB）之间，Swap 建议在 0.5GB 到 1.5GB（1024MB 到 1536MB）之间，并且当 Scene 提示交换策略时，选择优先使用 ZRAM。这样可以让新鲜的数据在较快的 ZRAM 里交换，而当 ZRAM 被榨干时则把脏数据写到 Swap 以备过后使用。

![效果图](https://s2.hdslb.com/bfs/article/20f11065f4af3fd39fe1100c57e465231352440272.png@1000h.webp)

#### VM Parameters

将 swapiness 和 extra_free_kbytes 拉得较大。这样可以保证留有充足的 RAM 以防止 OOM。

### 特殊版本

#### 微信

微信版本复杂，建议参考[百分之千 / 定制版应用收藏 / 版本拐点](https://gitee.com/ww3w/dzb/blob/master/1.md#-%E5%BE%AE%E4%BF%A1)选择，并从[酷安老哥微笑渲染悲伤的帖子](https://www.coolapk.com/feed/51351476)里下载。

比较推荐的是 7.0.21、Play8.0.15、Play8.0.33、8.0.42（话说这几个好像也不咋地，所以：zxl,\***\*\_\_\*\***！）

#### QQ

建议用 9.0.8，可以从[QQUpdates](https://t.me/QQUpdates)、[QQ/TIM Update Log](https://t.me/qq_updatelog)获得。9.0.15 和 9.0.17 有多人报道冷启动、小程序、扫码变慢。

#### Others

请参考以下几个视频：

[安卓软件保姆级优化，让你的手机再战三年！](https://www.bilibili.com/video/BV16P411P7QT/)

[让老旗舰机重回新生？请收好这份养老软件指南！](https://www.bilibili.com/video/BV1r94y1T7Xa/)

### 三方客户端

对于某些热门软件，可能会有大佬用爱发电。传送门有：

- [BiliYou](https://github.com/lucinhu/bili_you)（哔哩哔哩）
- [Pilipala](https://github.com/guozhigq/pilipala)（哔哩哔哩）
- [Hydrogen](https://github.com/huajiqaq/Hydrogen)（知乎）
- [Nagram](https://github.com/NextAlone/Nagram/)（Telegram）
- [Shaft](https://github.com/CeuiLiSA/Pixiv-Shaft)（Pixiv）

这些三方客户端有更为优秀的外观，更为可观的速度，以及某些诱人的功能。

### 手动养老

对 QQ 微信等压力大的软件启动 Scene 监视器，随时监测硬件状况以逼迫自己养老，防止 OOM。

## CPU 方向

### 通用

推介以下两件套：[Scene](http://vtools.omarea.com/) 、[Moka](https://moka.latestfile.zip/)。

Scene 可以调整 CPU，Moka 可以删除温控［注意：OPPO R11 一路下键即可，删不干净很正常，全删掉会有 Bug（比如爆音、打电话自动开免提、录屏时录不了系统内部声音）］

### 三方调度

#### Uperf 方案

刷入[Uperf Game Turbo](https://github.com/yinwanxi/Uperf-Game-Turbo)[AsoulOpt](https://github.com/nakixii/Magisk_AsoulOpt)

Uperf Game Turbo 可以较好得调节 CPU,使之在需要省电时省电、需要性能时高效。（注意：我们只需要 Uperf Game Turbo 的配置文件，而不需要其过分地教我们做事。为了避免其引起的一系列问题，请在刷入后将其禁用。）

AsoulOpt 可以调节线程，提高 CPU 效率。
![](https://s2.hdslb.com/bfs/article/5b176872d9d21a056c214fb990aa0a881352440272.png@1000h.webp)
#### [CuprumTurbo Scheduler](https://github.com/chenzyadb/CuprumTurbo-Scheduler) 方案

说这个东西可能令人眼前一黑，但说起 CuToolBox 相信大多数人都耳熟能详。CuprumTurbo Scheduler 就是 CuToolBox 的模块版。

经过测试后发现其确实有助于提升流畅性；但未经长期测试，加之峰值功率与 Uperf Game Turbo 相比明显偏大，难以得出准确结论。
![](https://s2.hdslb.com/bfs/article/589abf4ddc5824f1bcc037639c4391171352440272.png@1000h.webp)
{% note danger %}
安装 CuprumTurbo Scheduler 前，请先卸载 Uperf 及其相关和衍生模块和 AsoulOpt，并关闭 Scene 的核心分配与高通的 Performance Boost Config

{% inlineImg https://s2.hdslb.com/bfs/article/b78cebe362474026d5abdcd637f6cba61352440272.png@1e_1c.webp 600px %}{% inlineImg https://s2.hdslb.com/bfs/article/74af917c131fcdb2609cf48c4802f5a31352440272.png@1e_1c.webp 600px %}
{% endnote %}

#### Tritium Fiage 方案

Tritium Fiage 是基于 CuprumTurbo Scheduler 的修改版，可以从酷安的[鱼龄](https://www.coolapk.com/u/3922059)那里下载。

启用后建议将性能模式设为默认。功耗基本不会变，但流畅度会好很多。

![如图，极端场景（此处为连续刷 4K 视频）下功率仍不太高](https://s2.hdslb.com/bfs/article/8a224c202551da98cb6b8440784107621352440272.png@1000h.webp)

![功耗](https://s2.hdslb.com/bfs/article/e279516c9b215b5c4b438be2eb8416071352440272.png@1000h.webp)

{% note danger %}
安装 Tritium Fiage 前，请先卸载 Uperf 及其相关和衍生模块和 AsoulOpt，并关闭 Scene 的核心分配与高通的 Performance Boost Config

{% inlineImg https://s2.hdslb.com/bfs/article/b78cebe362474026d5abdcd637f6cba61352440272.png@1e_1c.webp 600px %}{% inlineImg https://s2.hdslb.com/bfs/article/74af917c131fcdb2609cf48c4802f5a31352440272.png@1e_1c.webp 600px %}
{% endnote %}

{% note success %}
请来到 /data/adb/modules/ct_module/modules，手动安装 cu_jank_detector.zip
{% endnote %}

{% note warning %}
不要安装解除系统限制模块。这是与 Moka 重复的去温控模块，并且效果略差
{% endnote %}
